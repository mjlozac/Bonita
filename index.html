<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Te deseo feliz 21 de septiembre</title>
  <meta name="description" content="Tarjeta animada: Te deseo feliz 21 de septiembre" />
  <style>
    :root{ --bg1:#ffecd2; --bg2:#fcb69f; --accent:#ff4d6d; --glass: rgba(255,255,255,0.2)}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--bg1),var(--bg2));overflow:hidden}
    .card{width:min(980px,94vw);max-width:980px;background:linear-gradient(180deg,rgba(255,255,255,0.85),rgba(255,255,255,0.75));backdrop-filter:blur(6px);border-radius:18px;box-shadow:0 12px 40px rgba(0,0,0,0.18);padding:36px;position:relative;overflow:hidden}
    header{display:flex;gap:16px;align-items:center}
    .logo{width:72px;height:72px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;background:linear-gradient(135deg,#ff7a9a,#ff4d6d);box-shadow:0 6px 18px rgba(255,77,109,0.25)}
    h1{margin:0;font-size:clamp(20px,4vw,38px);color:#40222a}
    p.lead{margin:8px 0 18px;color:#5b3b40}

    .main{display:flex;gap:28px;align-items:center}
    .text{flex:1}
    .big{font-size:clamp(34px,6vw,72px);line-height:0.95;margin:6px 0;color:var(--accent);text-shadow:0 6px 18px rgba(255,77,109,0.18)}
    .sub{font-size:18px;color:#6b4a52}

    .controls{display:flex;gap:10px;flex-direction:column;align-items:flex-end}
    .btn{background:#fff;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600;box-shadow:0 6px 18px rgba(0,0,0,0.08)}
    .btn.secondary{background:transparent;border:2px solid rgba(66,34,42,0.06)}

    .hearts{position:absolute;inset:0;pointer-events:none}

    footer{display:flex;justify-content:space-between;align-items:center;margin-top:18px}
    .small{font-size:12px;color:#7b5a5f}

    /* falling hearts */
    .heart{position:absolute;width:30px;height:30px;background:transparent;opacity:0.95}
    .heart:before,.heart:after{content:'';position:absolute;background:var(--accent);border-radius:50%;width:18px;height:18px}
    .heart:before{left:9px;top:0}
    .heart:after{left:0;top:9px}
    .heart > svg{position:absolute;left:4px;top:4px;width:22px;height:22px;fill:#fff}

    /* small responsive tweaks */
    @media (max-width:640px){.main{flex-direction:column;align-items:flex-start}.controls{width:100%;flex-direction:row;justify-content:space-between}.card{padding:20px}}
  </style>
</head>
<body>
  <div class="card" role="main">
    <header>
      <div class="logo">21
      </div>
      <div>
        <h1>Te deseo feliz 21 de septiembre</h1>
        <p class="lead">Una tarjeta para celebrar y compartir un buen deseo. Pulsa reproducir para música y disfruta de la animación.</p>
      </div>
    </header>

    <div class="main" style="margin-top:8px">
      <div class="text">
        <div class="big">¡Feliz 21 de septiembre!</div>
        <div class="sub">Que tu día esté lleno de alegría, cariño y momentos memorables. Comparte esta tarjeta con quien quieras alegrar hoy.</div>
      </div>

      <div class="controls">
        <button class="btn" id="playBtn" aria-pressed="false">▶︎ Reproducir música</button>
        <button class="btn secondary" id="confettiBtn">Lanzar confeti</button>
        <button class="btn" id="downloadBtn">Descargar PNG</button>
      </div>
    </div>

    <div class="hearts" id="heartsLayer" aria-hidden="true"></div>

    <footer>
      <div class="small">Creado con cariño ❤️</div>
      <div class="small">21/09</div>
    </footer>
  </div>

  <!-- audio (opcional) -->
  <audio id="song" src="https://cdn.pixabay.com/download/audio/2021/10/06/audio_2d3f6c7d3a.mp3?filename=happy-ambient-111680.mp3" preload="none"></audio>

  <!-- canvas-confetti desde CDN -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

  <script>
    // Elementos
    const playBtn = document.getElementById('playBtn');
    const confettiBtn = document.getElementById('confettiBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const song = document.getElementById('song');
    const heartsLayer = document.getElementById('heartsLayer');

    // Reproducir / Pausar música
    playBtn.addEventListener('click', ()=>{
      if(song.paused){
        song.play().catch(()=>{});
        playBtn.textContent = '⏸ Pausar música';
        playBtn.setAttribute('aria-pressed','true');
      } else {
        song.pause();
        playBtn.textContent = '▶︎ Reproducir música';
        playBtn.setAttribute('aria-pressed','false');
      }
    });

    // Confetti básico
    confettiBtn.addEventListener('click', ()=>{
      confetti.fire = confetti.create(null,{resize:true, useWorker:true});
      confetti.fire({particleCount:120, spread:160, origin:{y:0.6}});
      createHearts(12);
    });

    // generar corazones que caen
    function createHearts(n){
      for(let i=0;i<n;i++){
        const h = document.createElement('div');
        h.className='heart';
        const left = Math.random()*100;
        const size = 18 + Math.random()*28;
        h.style.left = left + '%';
        h.style.top = '-10%';
        h.style.width = size+'px';
        h.style.height = size+'px';
        h.style.opacity = 0.9 + Math.random()*0.1;
        h.innerHTML = '<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 21s-6.716-4.35-9.045-6.694C-0.99 9.962 4.134 4 8.5 7.5 11 9.5 12 11 12 11s1-1.5 3.5-3.5C19.866 4 24.99 9.962 21.045 14.306 18.716 16.65 12 21 12 21z"/></svg>';
        heartsLayer.appendChild(h);

        // animación simple con requestAnimationFrame
        const duration = 4000 + Math.random()*2600;
        const start = performance.now();
        const initialLeft = parseFloat(h.style.left);
        const sway = 12 + Math.random()*20;
        function frame(t){
          const elapsed = t - start;
          const progress = Math.min(1, elapsed/duration);
          h.style.top = (progress*120 - 10) + '%';
